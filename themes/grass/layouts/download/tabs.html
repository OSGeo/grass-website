{{ partial "head.html" . }}

{{ "<!-- navigation -->" | safeHTML }}
<header class="shadow-bottom position-relative">
  <div class="fixed-top">
    {{ partial "banner.html" . }}
    <div class="bg-primary">
      <div class="container bg-primary">
        {{ partial "navigation.html" . }}
      </div>
    </div>
  </div>
</header>
{{ "<!-- /navigation -->" | safeHTML }}

<section class="pt-4 mt-95 bg-white">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1>Download</h1>
      </div>
    </div>
  </div>
    
    <!-- Download Tab Sections -->
    <div class="container download-grass">
        <ul class="nav nav-tabs" id="downloadTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="linux-tab" data-toggle="tab" href="#linux" role="tab" aria-controls="linux" aria-selected="true">Linux</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="mac-tab" data-toggle="tab" href="#mac" role="tab" aria-controls="mac" aria-selected="false">macOS</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="windows-tab" data-toggle="tab" href="#windows" role="tab" aria-controls="windows" aria-selected="false">Windows</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="windows-tab" data-toggle="tab" href="#docker" role="tab" aria-controls="docker" aria-selected="false">Docker</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="source-tab" data-toggle="tab" href="#source" role="tab" aria-controls="source"
                aria-selected="false">Source Code</a>
            </li>
        </ul>
        <div class="tab-content" id="downloadTabContent">
          <!-- Linux Section -->
          <div class="tab-pane fade show active" id="linux" role="tabpanel" aria-labelledby="linux-tab">
            {{ $download_data := dict "os" "Linux" "version" .Site.Data.grass.current_version "binaries" .Site.Data.grass.install.linux.binaries "binaries_url" .Site.Data.grass.binaries_url }}
            {{ partial "grass-download.html" $download_data }}
            <h2>Installation</h2>
            {{ range $key, $value := .Site.Data.grass.install.linux.installers }}
              {{ partial "code-copy.html" $value }}
            {{ end }}
            <h2>Compile and Install</h2>
              <p>To compile and install GRASS from source, follow these steps from the <a href="https://grasswiki.osgeo.org/wiki/Compile_and_Install" target="_blank">GRASS wiki</a></p>
          </div>

          <!-- Mac Section -->
          <div class="tab-pane fade" id="mac" role="tabpanel" aria-labelledby="mac-tab">
            {{ $download_data := dict "os" "Mac" "version" .Site.Data.grass.current_version "binaries"
              .Site.Data.grass.install.mac.binaries "binaries_url" .Site.Data.grass.mac_binaries_url }}
            {{ partial "grass-download.html" $download_data }}
            {{ range $key, $value := .Site.Data.grass.install.mac.installers }}
              {{ partial "code-copy.html" $value }}
            {{ end }}
          </div>

          <!-- Windows Section -->
          <div class="tab-pane fade" id="windows" role="tabpanel" aria-labelledby="windows-tab">
            {{ $download_data := dict "os" "Windows" "version" .Site.Data.grass.current_version "binaries"
              .Site.Data.grass.install.windows.binaries "binaries_url" .Site.Data.grass.windows_binaries_url }}
            {{ partial "grass-download.html" $download_data }}
            <div class="container">
              <div class="row">
                <div class="col-12">
                  <h3>Additional Options</h3>
                  <div class="row mb-5 text-primary">
                    <div class="col-12">
                      <h4>QGIS users</h4>
                      <p>In order to have GRASS support (also in QGIS-Processing) you need to install the “qgis*-grass-plugin” packages.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Docker Section -->
          <div class="tab-pane fade" id="docker" role="tabpanel" aria-labelledby="docker-tab">
            <div class="grass-download">
              <h2>Docker Hub</h2>
              Offical GRASS Docker images are available on <a href="https://hub.docker.com/r/osgeo/grass-gis/" target="_blank">Docker Hub (osgeo/grass-gis)</a>. You can pull the latest image using the following command:
            </div>
            <h2>Installation</h2>

              {{ range $key, $value := .Site.Data.grass.install.docker }}
                {{ partial "code-copy.html" $value }}
              {{ end }}

              <h2>Getting Started with Docker</h2>

              <p>Build a docker image using the downloaded source code (run this in the directory containing the source code):</p>
              
              <h3>A. Docker image <strong>without graphical user interface - wxGUI</strong></h3>
              
              <pre><code>docker build -t grassgis .</code></pre>
              
              <p>A test run (assuming you have the existing GRASS test location; it can be downloaded from 
              <a href="https://grass.osgeo.org/sampledata/north_carolina/nc_basic_spm_grass7.zip">here</a>)</p>
              
              <pre><code># case 1: launching in the grassdata directory in which the location is stored:
              docker run -it --rm --user=$(id -u):$(id -g) --volume $(pwd):/data \
                  --env HOME=/data/ grassgis grass --text nc_basic_spm_grass7/user1 \
                      --exec g.region -p
              
              # case 2: launching anywhere
              docker run -it --rm --user=$(id -u):$(id -g) \
                  --volume /your/test/grassdata/:/data --env HOME=/data/ grassgis \
                      grass /data/nc_basic_spm_grass7/PERMANENT --exec g.region -p
              </code></pre>
              
              <p>Note that the first <code>grassgis</code> is the name of the image while the second <code>grass</code> is the name of the executable.</p>
              
              <p>To run the tests (again assuming local location):</p>
              
              <pre><code># case 1: launching in the grassdata directory in which the location is stored:
              docker run -it --rm --user=$(id -u):$(id -g) --volume $(pwd):/data \
                  --env HOME=/data/ grassgis grass --text nc_basic_spm_grass7/user1 \
                      --exec g.region -p
              
              # case 2: launching anywhere
              docker run -it --rm --user=$(id -u):$(id -g) \
                  --volume /your/test/grassdata/:/data --env HOME=/data/ -w /code/grass \
                      grassgis grass /data/nc_basic_spm_grass7/PERMANENT --exec \
                          python -m grass.gunittest.main \
                              --location nc_basic_spm_grass7 --location-type nc
              </code></pre>
              
              <h3>B. Docker image <strong>with graphical user interface - wxGUI</strong></h3>
              
              <pre><code>docker build -t grassgis -f docker/ubuntu_wxgui/Dockerfile .</code></pre>
              
              <p>Note that the first <code>grassgis</code> is the name of the image while the second <code>grass</code> is the name of the executable.</p>
              
              <pre><code>xhost local:$(id -u)
              docker run -it --privileged --user=$(id -u):$(id -g) --rm \
                  --volume="$(pwd)/:/data" --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" \
                  --env HOME=/data/ --env DISPLAY=$DISPLAY \
                  --device="/dev/dri/card0:/dev/dri/card0" \
                  grassgis grass --gui
              </code></pre>
              
              <p>Note: If you compiled locally before building the Docker image, you may encounter problems as the local configuration and the locally compiled files are copied to and used in the Docker image. To make sure you don't have this issue, clean all the compiled files from the source code:</p>
              
              <pre><code>make distclean</code></pre>
          </div>

        <!-- Source Section -->
        <div class="tab-pane fade" id="source" role="tabpanel" aria-labelledby="source-tab">
          <h2>Source Code</h2>
          Source code is avaliable on <a href="https://github.com/OSGeo/grass/" target="_blank">GitHub</a>. You can download the latest release at
          <a href="https://github.com/OSGeo/grass/releases" target="_blank">https://github.com/OSGeo/grass/releases</a>

          <h2>Compile and Install</h2>
          <p>To compile and install GRASS from source, follow these steps from the <a
                href="https://grasswiki.osgeo.org/wiki/Compile_and_Install" target="_blank">GRASS wiki</a></p>
        </div>
      </div>

    </div>
</section>

{{ partial "footer.html" . }}
